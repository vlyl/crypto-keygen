# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the BIP39 mnemonic code converter tool by Ian Coleman - a cryptographic tool that generates Bitcoin addresses and keys from BIP39 mnemonic phrases. It's a standalone HTML/JavaScript application designed to work offline for security.

## Build and Development Commands

### Building the Project
- `python compile.py` - Compiles all source files into a single standalone HTML file (`bip39-standalone.html`)
- The build process inlines all CSS and JavaScript files from `src/` into the main HTML file

### Testing
- `cd tests && npm install` - Install test dependencies
- `cd tests && jasmine spec/tests.js` - Run tests using Jasmine
- Tests require selenium webdriver and a browser (Firefox/Chrome)
- For browser testing: `BROWSER=firefox jasmine spec/tests.js` or `BROWSER=chrome jasmine spec/tests.js`
- Tests must be run with the site served at http://localhost:8000 (use `cd src && python -m http.server`)

### Development Environment Setup
- Use `dev_env_setup.sh` for VM-based development setup (Ubuntu 20.04)
- Installs Firefox, Chrome, Node.js, Jasmine, and webdrivers

## Architecture

### File Structure
- `src/index.html` - Main HTML template with embedded JavaScript references
- `src/js/` - JavaScript modules:
  - `index.js` - Main application logic and UI handling
  - `entropy.js` - Entropy detection and processing (binary, dice, hex, cards)
  - `jsbip39.js` - BIP39 mnemonic implementation
  - `bitcoinjs-extensions.js` - Bitcoin cryptographic extensions
  - `wordlist_*.js` - BIP39 wordlists for different languages
- `src/css/` - Stylesheets (Bootstrap + custom CSS)
- `libs/` - External libraries (BitcoinJS, BIP38, etc.)
- `tests/` - Selenium-based browser tests

### Key Components
- **Mnemonic Generation**: Creates BIP39 mnemonic phrases with configurable entropy
- **Key Derivation**: Supports BIP32, BIP44, BIP49, BIP84, BIP141 derivation paths
- **Multi-Currency**: Bitcoin, Litecoin, Ethereum, and many other cryptocurrencies
- **Entropy Sources**: Binary, dice, hex, cards, and custom entropy input
- **Address Generation**: Bulk address generation with private/public key pairs
- **BIP85**: Hierarchical deterministic entropy for child mnemonics

### Security Features
- Designed for offline use (standalone HTML file)
- Privacy screen to hide sensitive data
- BIP38 encryption support for private keys
- Warns users about security risks extensively

## Development Guidelines

### Making Changes
- **Never modify** `bip39-standalone.html` directly - it's generated by `compile.py`
- Make all changes in `src/` files
- Test locally by serving `src/index.html` at localhost:8000
- Run tests before committing changes

### Release Process
1. Run tests and ensure they pass
2. Update version in `src/index.html`
3. Update `changelog.md`
4. Run `python compile.py` to build standalone file
5. Commit with message `Release vX.Y.Z`
6. Tag commit and create GitHub release
7. Generate and verify SHA256 hash of standalone file

## Important Notes

- This is a security-critical cryptocurrency tool
- All changes should be thoroughly tested
- The standalone HTML file should work completely offline
- Never commit the generated `bip39-standalone.html` file except during releases
- Consider security implications of any modifications to entropy handling or key generation